(this["webpackJsonparabic-ocr"]=this["webpackJsonparabic-ocr"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(7),l=a.n(i),s=(a(14),a(3)),o=a(2),c=(a(15),a(0)),d=function(e){return Object(c.jsx)("div",{className:"fixed flex flex-row justify-center items-center w-screen h-screen z-30 animate__animated animate__fadeIn",children:Object(c.jsx)("div",{className:"bg-white animate-pulse sm:text-xl shadow-2xl  border-2 border-black rounded p-4",children:e.state})})},h=function e(t){var a=t.offsetTop+t.offsetHeight;if(document.scrollingElement.scrollTop=b(document.scrollingElement.scrollTop,1.05*a,.05),!(document.scrollingElement.scrollTop<a))return t.hidden=!0,!0;setTimeout((function(){e(t)}),1e3/60)},u=function(e,t,a){var n=document.createElement("div");n.setAttribute("style","position: fixed; \n        z-index: 100;\n        bottom: 0;\n        left: 0;\n        margin: 10px;\n        padding: 20px;\n        border-radius: 15px; \n        text-alignment: center;\n        box-shadow: black 5px 5px;\n        color: white; \n        background-color: ".concat(t,";")),n.innerHTML="<p>".concat(e,"</p>"),document.getElementById("AnalyzingSection").appendChild(n),setTimeout((function(){return n.remove()}),a)},b=function(e,t,a){return(1-a)*e+t*a},m=function(e){return Object(c.jsx)("div",{id:"Header",className:"text-center h-screen overflow-hidden",children:Object(c.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-full bg-black bg-opacity-25 animate__animated animate__fadeIn",children:[Object(c.jsxs)("div",{className:"flex-1 p-5 select-none flex flex-col justify-evenly",style:{color:"#e7e7e7"},children:[Object(c.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(c.jsx)("p",{className:"text-3xl md:text-7xl font-semibold p-3 my-3 rounded hover:bg-opacity-30 hover:bg-black transition duration-300",children:"Arabic OCR (Beta)"}),Object(c.jsx)("p",{className:"md:text-xl font-semibold p-4 rounded hover:bg-opacity-30 hover:bg-black transition duration-300",children:"I've already done the hard work for you by breaking the words down into letters; now it's your responsibility to construct your own OCR programme by supplying the application with letter-image pairs. ^_^"})]}),Object(c.jsx)("div",{className:"my-3",children:Object(c.jsx)("button",{className:"sm:text-xl p-2 md:p-6 rounded border hover:bg-white hover:text-black transition animate__animated animate__fadeIn",onClick:function(t){t.target;e.getStartedHandler(),setTimeout((function(){return h(document.getElementById("Header"))}),1e3)},children:"Get Started"})}),Object(c.jsxs)("div",{children:["Created by ",Object(c.jsx)("a",{className:"text-blue-200 font-semibold",href:"https://www.linkedin.com/in/mo-ehab/",rel:"noreferrer",target:"_blank",children:"Mahmoud Ehab"})]})]}),Object(c.jsx)("div",{className:"flex-1 p-5 bg-black bg-opacity-40 flex flex-col items-center justify-center animate__animated animate__fadeInRight animate__delay-1s",children:Object(c.jsx)("img",{alt:"",className:"bg-black bg-opacity-70 rounded-xl",src:"OCR.gif"})})]})})},g=a(8),f=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],i=a[1],l=function(){var e=r.imread("canvas"),t=new r.Mat,a=e.cols,n=e.rows;e.cols>1e3?(n*=1e3/a,a*=1e3/a):(a/=1.25,n/=1.25),n>1e3&&(a*=1e3/n,n*=1e3/n),a=parseInt(a),n=parseInt(n),u("Resolution: "+a+" x "+n,"#e1b12c",2500);var i=new r.Size(a,n);r.resize(e,t,i,0,0,r.INTER_AREA),r.imshow("canvas",t),e.delete(),t.delete()};return e.appear&&Object(c.jsx)(g.a,{onLoad:function(e){i(e)},children:Object(c.jsxs)("div",{id:"AnalyzingSection",className:"flex flex-col-reverse sm:flex-row bg-gray-800 bg-opacity-80 items-center h-auto sm:h-screen p-3 animate__animated animate__fadeIn",children:[Object(c.jsxs)("div",{className:"flex flex-col flex-1 w-full bg-black bg-opacity-30 h-full rounded overflow-hidden",children:[!r&&Object(c.jsx)("p",{className:"text-white text-3xl m-auto",children:"Loading OpenCV.js..."}),r&&Object(c.jsxs)("div",{className:"flex flex-col h-full",children:[Object(c.jsx)("input",{type:"file",id:"fileInput",className:"hidden",onChange:function(e){var t=document.createElement("img");t.src=URL.createObjectURL(e.target.files[0]),t.src&&(t.onload=function(){var e=r.imread(t);r.imshow("canvas",e),e.delete(),l()})}}),Object(c.jsx)("button",{className:"bg-gray-200 p-3 shadow-inner hover:bg-black hover:text-white transition",onClick:function(){document.getElementById("fileInput").click()},children:"Upload Image"}),Object(c.jsx)("div",{className:"h-full shadow overflow-auto",children:Object(c.jsx)("canvas",{id:"canvas",className:"w-full"})}),Object(c.jsx)("button",{className:"bg-black bg-opacity-30 p-3 hover:bg-black text-white transition",onClick:l,children:"Low Resolution"}),Object(c.jsx)("button",{className:"bg-black bg-opacity-30 p-3 hover:bg-black text-white transition",onClick:function(){for(var e=document.getElementById("canvas"),t=e.getContext("2d"),a=t.getImageData(0,0,e.width,e.height).data,n=0;n<a.length;n+=4){var r=(a[n]+a[n+1]+a[n+2])/3;a[n]=r,a[n+1]=r,a[n+2]=r}for(var i=0,l=0,s=0;s<a.length;s++)l+=1,i+=a[s];for(var o=i/l,c=0;c<a.length;c+=4)a[c]>o/1.5?(a[c]=0,a[c+1]=0,a[c+2]=0):(a[c]=255,a[c+1]=255,a[c+2]=255);var d=new ImageData(new Uint8ClampedArray(a),e.width,e.height);t.putImageData(d,0,0)},children:"Optimize / Switch White-Black"}),Object(c.jsx)("button",{className:"bg-black bg-opacity-30 p-3 hover:bg-black text-white transition",onClick:function(){e.clearLettersHandler(),e.toggleLoading();var t=document.getElementById("canvas"),a=t.getContext("2d"),n=new Worker("./WebWorkers/PixelsAggregator.js");n.postMessage({imgData:a.getImageData(0,0,t.width,t.height).data,width:a.getImageData(0,0,t.width,1).data.length}),e.setLoadingStateHandler("Preprocessing..."),n.onmessage=function(t){e.setLoadingStateHandler("Analyzing data...");var a=new Worker("./WebWorkers/AnalyzeRequest.js");a.postMessage({imgData:t.data}),a.onmessage=function(t){t.data.forEach((function(t,a){e.addLetterHandler(t)})),e.finalizeHandler(),h(document.getElementById("AnalyzingSection")),a.terminate()},a.onerror=function(t){e.toggleLoading(),u("AnalyzeRequest: "+t.message,"#321213",5e3),a.terminate()},n.terminate()},n.onerror=function(t){e.toggleLoading(),u("PixelsAggregator: "+t.message,"#321213",5e3),n.terminate()}},children:"Analyze"})]})]}),Object(c.jsxs)("div",{className:"flex flex-col flex-1 p-6 overflow-auto bg-black bg-opacity-10 h-full text-white",children:[Object(c.jsxs)("div",{className:"select-none",children:[Object(c.jsx)("h1",{className:"text-2xl font-bold my-1",children:"Analyzing Section"}),Object(c.jsx)("p",{className:"text-justify mb-4",children:"Here's where the action happens: upload your text image, then click the \"Analyze\" button at the bottom to begin breaking it down into letters, so we can start the learning phase. But before that, if the image isn't already black-and-white, you shall convert it. You might also reduce the resolution of the image if needed, and lastly you may wish to put the algorithm to the test first."}),Object(c.jsx)("h1",{className:"text-2xl font-bold my-1",children:"Optimizing The Image"}),Object(c.jsxs)("p",{className:"text-justify mb-4",children:['Once you click the "Optimize" button at the bottom, the image will be converted into black-and-white, that will eliminate pixelization.',Object(c.jsx)("span",{className:"font-bold",children:" Keep in mind that the text must be provided in black. "})]}),Object(c.jsx)("h1",{className:"text-2xl font-bold my-1",children:"Low Resolution"}),Object(c.jsx)("p",{className:"text-justify mb-4",children:"The image's resolution is automatically lowered after it is uploaded, in order to obtain a greater level of performance. However, you can reduce the resolution even more by pressing the 'Low Resolution' button, it'll reduce the resolution by a fifth which is not usually required as the automatic execution do well."}),Object(c.jsx)("h1",{className:"text-2xl font-bold my-1",children:"Testing"}),Object(c.jsx)("p",{className:"text-justify mb-4",children:"Actually, the test button is meant to be used for illustrative purposes only, to examine what's going on behind the scenes."})]}),r&&Object(c.jsx)("button",{className:"text-white font-black w-1/3 m-auto p-3  rounded border-2 border-white hover:bg-gray-900 transition",onClick:function(){e.toggleLoading();var t=document.getElementById("canvas"),a=t.getContext("2d"),n=new Worker("./WebWorkers/PixelsAggregator.js");n.postMessage({imgData:a.getImageData(0,0,t.width,t.height).data,width:a.getImageData(0,0,t.width,1).data.length}),e.setLoadingStateHandler("Preprocessing..."),n.onmessage=function(t){e.setLoadingStateHandler("Analyzing data...");var a=new Worker("./WebWorkers/TestRequest.js");a.postMessage({imgData:t.data}),a.onmessage=function(t){e.toggleLoading(),e.showTestResultHandler(t.data),a.terminate()},a.onerror=function(t){e.toggleLoading(),u("TestRequest: "+t.message,"#321213",5e3),a.terminate()},n.terminate()},n.onerror=function(t){e.toggleLoading(),u("PixelsAggregator: "+t.message,"#321213",5e3),n.terminate()}},children:"Test"})]})]})})},x=function(e){var t=function(t,a){e.addToDB(t,a)};return e.appear?Object(c.jsxs)("div",{id:"LearningSection",className:"flex flex-col h-screen h-auto items-center bg-gray-200 p-8 shadow \n        animate__animated animate__fadeInLeft animate__slow",children:[Object(c.jsxs)("div",{className:"flex sm:flex-row flex-col flex-1 justify-around w-full overflow-hidden",children:[Object(c.jsx)("div",{className:"flex sm:flex-col flex-row-reverse justify-between overflow-y-hidden\n                w-auto lg:w-1/3 sm:overflow-y-scroll rounded sm:shadow-xl",children:e.letters.map((function(e,a){return Object(c.jsx)(j,{cid:a,letterImgData:e,addToDB:t})}))}),Object(c.jsx)("div",{className:"w-auto h-1/3 sm:h-full sm:w-1/3 rounded sm:shadow-xl",children:Object(c.jsx)(w,{learnedTexts:e.learnedTexts})})]}),Object(c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-around mt-6 w-full bg-white",children:[Object(c.jsx)("button",{className:"hover:bg-green-300 hover:text-white py-3 sm:w-1/3 duration-300",onClick:e.saveDataHandler,children:"Save"}),Object(c.jsxs)("button",{className:"relative hover:bg-green-300 hover:text-white py-3 sm:w-1/3 duration-300",onClick:function(){document.getElementById("loadFileInput").click()},children:["Load",Object(c.jsx)("input",{id:"loadFileInput",className:"hidden",onChange:e.loadDataHandler,type:"file",accept:".json",multiple:!0})]}),Object(c.jsx)("button",{className:"hover:bg-green-400 hover:text-white py-3 sm:w-1/3 duration-300",onClick:e.finalizeHandler,children:"Submit"})]})]}):Object(c.jsx)("div",{id:"learningSection"})},j=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(o.a)(l,2),d=s[0],h=s[1];Object(n.useEffect)((function(){if(e.letterImgData.length){var t=document.getElementById(e.cid),a=t.getContext("2d"),n=e.letterImgData,r=n[0].length,i=n.length;t.width=r>100?2*r:100,t.height=i>100?2*i:100;for(var l=u(n),s=new Uint32Array(r*i),o=0;o<s.length;o++)s[o]=parseInt(l[o]);var c=new ImageData(new Uint8ClampedArray(s.buffer),r,i);a.putImageData(c,(t.width-r)/2,(t.height-i)/2)}}));var u=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var r=e[a][n][2].toString(16),i=e[a][n][1].toString(16),l=e[a][n][0].toString(16);r.length<2&&(r+=r),i.length<2&&(i+=i),l.length<2&&(l+=l),t.push("0xff"+r+i+l)}return t};return e.letterImgData.length?Object(c.jsxs)("div",{className:"flex flex-col justify-evenly h-full m-2 p-6 rounded\n        ".concat(d&&"animate-letterDisappear"),children:[Object(c.jsx)("canvas",{id:e.cid,className:"bg-white rounded shadow mb-2"}),Object(c.jsxs)("div",{className:"flex flex-col",children:[d||Object(c.jsx)("input",{type:"text",className:"p-2 mb-1 rounded shadow",placeholder:"What's the above letter?",onChange:function(e){i(e.target.value)},value:r}),d||Object(c.jsx)("button",{className:"p-2 bg-green-500 hover:bg-white text-white hover:text-green-500 rounded duration-200",onClick:function(){e.addToDB(r,e.letterImgData),h(!0)},children:"Submit"})]})]}):""},w=function(e){var t=function(t){for(var a=0;a<e.learnedTexts.length;a++)if(e.learnedTexts[a]===t)return!0;return!1};return Object(c.jsx)("div",{className:"w-full h-full bg-red-300 overflow-y-scroll divide-y",children:["\u0623","\u0625","\u0627","\u0627\u0644","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0644\u0627","\u0645","\u0646","\u0647","\u0648","\u064a"].map((function(e){return Object(c.jsxs)("div",{className:"flex flex-row justify-between p-2 ".concat(t(e)?"bg-green-400":"bg-red-400"),children:[Object(c.jsx)("label",{className:"text-white",children:t(e)?"\u062a\u0645":"\u0645\u0639\u0644\u0642"}),Object(c.jsx)("label",{className:"text-white text-xl",children:e})]})}))})},p=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1];return Object(c.jsx)("div",{className:"flex flex-col w-screen h-screen fixed bg-black bg-opacity-25 z-10\n        justify-evenly items-center",children:Object(c.jsxs)("div",{className:"flex flex-col w-screen h-screen justify-evenly items-center animate__animated animate__jackInTheBox",children:[Object(c.jsxs)("div",{className:"flex flex-col w-1/2 md:w-1/3 rounded",children:[Object(c.jsx)("a",{className:"text-center sm:text-xl text-bold text-white hover:text-blue-600 bg-blue-500 hover:bg-gray-200 transition mb-3 py-3 rounded shadow",href:"https://www.linkedin.com/in/mo-ehab",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("p",{children:"Contact me"})}),Object(c.jsx)("a",{className:"text-center sm:text-xl text-bold text-white hover:text-gray-900 bg-gray-800 hover:bg-gray-200 transition mb-3 py-3 rounded shadow",href:"https://github.com/Mahmoud-Ehab/arabic-ocr",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("p",{children:"GitHub - Source Code"})})]}),Object(c.jsx)("a",{href:"https://www.buymeacoffee.com/MoEhab",className:"flex justify-center",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("img",{className:"shadow hover:shadow-lg transition",src:"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",alt:"Buy Me A Coffee",width:"217",height:"60"})}),Object(c.jsxs)("div",{className:"flex flex-col bg-gray-100 w-96 p-6 rounded shadow",children:[r&&Object(c.jsx)("p",{class:"text-right overflow-y-scroll break-words  select-all w-full flex-grow p-3",children:r}),!r&&Object(c.jsx)("button",{className:"shadow p-3",onClick:function(){var t=new Worker("./WebWorkers/Interpreter.js");t.postMessage({target:e.letters,X:e.images,y:e.texts}),t.onmessage=function(e){var a=e.data,n="";a.forEach((function(e){n+=e})),i(n),t.terminate()},t.onerror=function(e){u("Interpreter: "+e.message,"#321213",5e3),t.terminate()}},children:"Show Text"})]}),Object(c.jsx)("button",{className:"text-white text-2xl",onClick:e.toggleLearnedHandler,children:"X"})]})})},v=function(e){Object(n.useEffect)((function(){for(var a=document.getElementById("canvas"),n=a.getContext("2d"),r=e.result,i=r[0].length,l=r.length,s=t(r),o=new Uint32Array(i*l),c=0;c<o.length;c++)o[c]=parseInt(s[c]);var d=new ImageData(new Uint8ClampedArray(o.buffer),i,l);n.putImageData(d,(a.width-i)/2,(a.height-l)/2)}));var t=function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++){var r=e[a][n][2].toString(16),i=e[a][n][1].toString(16),l=e[a][n][0].toString(16);r.length<2&&(r+=r),i.length<2&&(i+=i),l.length<2&&(l+=l),t.push("0xff"+r+i+l)}return t};return Object(c.jsxs)("div",{className:"fixed flex flex-col justify-center items-center text-white w-screen h-screen z-30 animate__animated animate__jackInTheBox select-none",onClick:function(){e.hideTestResult()},children:[Object(c.jsx)("canvas",{id:"canvas",className:"bg-white rounded shadow"}),Object(c.jsx)("p",{className:"w-3/4 sm:w-1/2 text-center my-6 p-3 bg-black bg-opacity-75 rounded",children:"The red horizontal row is the 'DecisionRow', it has been located automatically in a way that makes it feasible to go through the word and extract letters from it whenever the row hits a black pixel. The vertical lines should be positioned in a way that proparly decompise the word into letters."}),Object(c.jsx)("p",{className:"w-3/4 sm:w-1/2 text-center p-3 bg-black bg-opacity-75 rounded",children:"For best results: You may presume that Arabic has 756 letters instead of 28."})]})},O=a(9);var y=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),h=l[0],u=l[1],b=Object(n.useState)([]),g=Object(o.a)(b,2),j=g[0],w=g[1],y=Object(n.useState)(null),N=Object(o.a)(y,2),k=N[0],I=N[1],_=Object(n.useState)(!1),S=Object(o.a)(_,2),C=S[0],T=S[1],L=Object(n.useState)(!1),D=Object(o.a)(L,2),H=D[0],A=D[1],z=Object(n.useState)(!1),E=Object(o.a)(z,2),B=E[0],R=E[1],W=Object(n.useState)(!1),M=Object(o.a)(W,2),F=M[0],P=M[1],U=Object(n.useState)(""),q=Object(o.a)(U,2),J=q[0],G=q[1],X=function(){R((function(e){return!e}))};return Object(c.jsxs)("div",{children:[F&&Object(c.jsx)(d,{state:J}),k&&Object(c.jsx)(v,{result:k,hideTestResult:function(){I(null)}}),B&&Object(c.jsx)(p,{texts:h,images:j,letters:a,toggleLearnedHandler:X}),Object(c.jsxs)("div",{className:"flex flex-col justify-between bg-center bg-cover bg-fixed\n      overflow-hidden ".concat((F||k||B)&&"filter blur-sm grayscale"),style:{backgroundImage:'url("header.jpg")'},children:[Object(c.jsx)(m,{getStartedHandler:function(){T(!0)}}),Object(c.jsx)(f,{appear:C,showTestResultHandler:function(e){I(e)},addLetterHandler:function(e){r((function(t){var a=Object(s.a)(t);return a.push(e),a}))},clearLettersHandler:function(){r([]),u([]),w([])},finalizeHandler:function(){A(!0),P(!1)},toggleLoading:function(){P((function(e){return!e}))},setLoadingStateHandler:function(e){G(e)}}),Object(c.jsx)(x,{letters:a,addToDB:function(e,t){u((function(t){var a=Object(s.a)(t);return a.push(e),a})),w((function(e){var a=Object(s.a)(e);return a.push(t),a}))},learnedTexts:h,appear:H,finalizeHandler:X,saveDataHandler:function(){var e={images:j,texts:h},t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(O.saveAs)(t,"ArabicOCR-LearningData.json")},loadDataHandler:function(e){u([]),w([]);for(var t=e.target.files,a=t.length,n=0;n<a;n++){var r=new FileReader;r.onload=function(e){var t=JSON.parse(e.target.result);w((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t.images))})),u((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t.texts))}))},r.readAsText(t[n])}}})]})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),i(e),l(e)}))};l.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(y,{})}),document.getElementById("root")),N()}},[[18,1,2]]]);
//# sourceMappingURL=main.fbaee6d9.chunk.js.map